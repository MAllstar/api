<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Margin | Gate API v4</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="gate.io api v4.21.5">
    
    <link rel="preload" href="./assets/css/0.styles.fad3b0e1.css" as="style"><link rel="preload" href="./assets/js/app.65f650ad.js" as="script"><link rel="preload" href="./assets/js/3.b76994fe.js" as="script"><link rel="preload" href="./assets/js/9.f6a99c62.js" as="script"><link rel="prefetch" href="./assets/js/1.9f89da38.js"><link rel="prefetch" href="./assets/js/10.c9d8cab3.js"><link rel="prefetch" href="./assets/js/11.d09f0da5.js"><link rel="prefetch" href="./assets/js/12.e81f776c.js"><link rel="prefetch" href="./assets/js/13.2dcdd192.js"><link rel="prefetch" href="./assets/js/14.ec938b28.js"><link rel="prefetch" href="./assets/js/15.130bcbea.js"><link rel="prefetch" href="./assets/js/16.ce1bfbe6.js"><link rel="prefetch" href="./assets/js/17.e4ef3840.js"><link rel="prefetch" href="./assets/js/18.27164342.js"><link rel="prefetch" href="./assets/js/19.b39c3de8.js"><link rel="prefetch" href="./assets/js/20.d214918e.js"><link rel="prefetch" href="./assets/js/21.e92ffc51.js"><link rel="prefetch" href="./assets/js/22.03c98551.js"><link rel="prefetch" href="./assets/js/23.115a6bac.js"><link rel="prefetch" href="./assets/js/24.42586862.js"><link rel="prefetch" href="./assets/js/25.794702b9.js"><link rel="prefetch" href="./assets/js/4.f084bae2.js"><link rel="prefetch" href="./assets/js/5.128746b8.js"><link rel="prefetch" href="./assets/js/6.60d747f8.js"><link rel="prefetch" href="./assets/js/7.2d103be0.js"><link rel="prefetch" href="./assets/js/8.c64ded12.js">
    <link rel="stylesheet" href="./assets/css/0.styles.fad3b0e1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme__container"><div class="pageHeader pageHeader"><ul class="pageNav"><li class="navItem"> 
      现货&amp;杠杆
      <div class="navPopup"><!----></div></li><li class="navItem"> 
      永续合约
      <div class="navPopup"><!----></div></li><li class="navItem"> 
      交割合约
      <div class="navPopup"><!----></div></li></ul></div> <div class="row"><div class="col-md-3 col-lg-2 sidebar__container"><div class="menu menu__container"><div class="menu__box"><a class="menu__btn"><div class="hamburger"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></a></div></div> <div class="sidebar" style="width:100%;display:none;"><div class="group"><div class="group__title">Search</div> <div class="group__body"><div class="search search__container"><div class="search__heading"><input type="text" value="" class="search__ipt"></div> <div class="search__body"><ul class="search__list" style="display:none;"><li class="search__item"><a href="/gate/1-gate-api-v4.html">Gate API v4 v4.21.5</a></li><li class="search__item"><a href="/gate/1-gate-api-v4.html#access-url">Access URL</a></li><li class="search__item"><a href="/gate/1-gate-api-v4.html#websocket-documents">WebSocket Documents</a></li><li class="search__item"><a href="/gate/1-gate-api-v4.html#sdk">SDK</a></li><li class="search__item"><a href="/gate/1-gate-api-v4.html#about-apiv4-key-improvement">About APIv4 key improvement</a></li></ul></div></div></div></div> <div class="group"><div class="group__body"><div class="sidebar__lang"><div class="select select__container"><select value="/gate/10-margin.html" class="select__item"><option value="/gate/10-margin.html" class="select__option">
      English
    </option><option value="/zh/" class="select__option">
      简体中文
    </option></select></div></div></div></div> <div class="group"><div class="group__title">
      gate
    </div> <div class="group__body"><!----> <!----> <div><div class="group__category category"><div class="category__label"><a href="/gate/1-gate-api-v4.html" class="category__link sidebar-link">Gate API V4 V4.21.5</a></div> <div><div class="category__headers"><div class="category__header-item"><a href="/gate/1-gate-api-v4.html#access-url" class="category__link sidebar-link">Access Url</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/1-gate-api-v4.html#websocket-documents" class="category__link sidebar-link">Websocket Documents</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/1-gate-api-v4.html#sdk" class="category__link sidebar-link">Sdk</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/1-gate-api-v4.html#about-apiv4-key-improvement" class="category__link sidebar-link">About Apiv4 Key Improvement</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/1-gate-api-v4.html#comparison-with-apiv2" class="category__link sidebar-link">Comparison With Apiv2</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/1-gate-api-v4.html#application-for-marketers" class="category__link sidebar-link">Application For Marketers</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/1-gate-api-v4.html#technical-support" class="category__link sidebar-link">Technical Support</a></div></div></div></div><div class="group__category category"><div class="category__label"><a href="/gate/2-changelog.html" class="category__link sidebar-link">Changelog</a></div> <!----></div><div class="group__category category"><div class="category__label"><a href="/gate/3-general.html" class="category__link sidebar-link">General</a></div> <div><div class="category__headers"><div class="category__header-item"><a href="/gate/3-general.html#matching-mechanism" class="category__link sidebar-link">Matching Mechanism</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/3-general.html#data-center" class="category__link sidebar-link">Data Center</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/3-general.html#api-overview" class="category__link sidebar-link">API Overview</a></div></div></div></div><div class="group__category category"><div class="category__label"><a href="/gate/4-api.html" class="category__link sidebar-link">API</a></div> <div><div class="category__headers"><div class="category__header-item"><a href="/gate/4-api.html#http-convention" class="category__link sidebar-link">HTTP Convention</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/4-api.html#time" class="category__link sidebar-link">Time</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/4-api.html#pagination" class="category__link sidebar-link">Pagination</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/4-api.html#frequency-limit-rule" class="category__link sidebar-link">Frequency Limit Rule</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/4-api.html#return-format" class="category__link sidebar-link">Return Format</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/4-api.html#data-type" class="category__link sidebar-link">Data Type</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/4-api.html#error-handling" class="category__link sidebar-link">Error Handling</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/4-api.html#label-list" class="category__link sidebar-link">Label List</a></div></div></div></div><div class="group__category category"><div class="category__label"><a href="/gate/5-authentication.html" class="category__link sidebar-link">Authentication</a></div> <div><div class="category__headers"><div class="category__header-item"><a href="/gate/5-authentication.html#generate-api-key" class="category__link sidebar-link">Generate API Key</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/5-authentication.html#apiv4-permissions" class="category__link sidebar-link">Apiv4 Permissions</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/5-authentication.html#apiv4-signed-request-requirements" class="category__link sidebar-link">Apiv4 Signed Request Requirements</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/5-authentication.html#api-signature-string-generation" class="category__link sidebar-link">API Signature String Generation</a></div></div></div></div><div class="group__category category"><div class="category__label"><a href="/gate/6-faq.html" class="category__link sidebar-link">Faq</a></div> <!----></div><div class="group__category category"><div class="category__label"><a href="/gate/7-withdrawal.html" class="category__link sidebar-link">Withdrawal</a></div> <div><div class="category__headers"><div class="category__header-item"><a href="/gate/7-withdrawal.html#withdraw" class="category__link sidebar-link">Withdraw</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/7-withdrawal.html#cancel-withdrawal-with-specified-id" class="category__link sidebar-link">Cancel Withdrawal With Specified Id</a></div></div></div></div><div class="group__category category"><div class="category__label"><a href="/gate/8-wallet.html" class="category__link sidebar-link">Wallet</a></div> <div><div class="category__headers"><div class="category__header-item"><a href="/gate/8-wallet.html#generate-currency-deposit-address" class="category__link sidebar-link">Generate Currency Deposit Address</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/8-wallet.html#retrieve-withdrawal-records" class="category__link sidebar-link">Retrieve Withdrawal Records</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/8-wallet.html#retrieve-deposit-records" class="category__link sidebar-link">Retrieve Deposit Records</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/8-wallet.html#transfer-between-trading-accounts" class="category__link sidebar-link">Transfer Between Trading Accounts</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/8-wallet.html#transfer-between-main-and-sub-accounts" class="category__link sidebar-link">Transfer Between Main And Sub Accounts</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/8-wallet.html#transfer-records-between-main-and-sub-accounts" class="category__link sidebar-link">Transfer Records Between Main And Sub Accounts</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/8-wallet.html#retrieve-withdrawal-status" class="category__link sidebar-link">Retrieve Withdrawal Status</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/8-wallet.html#retrieve-sub-account-balances" class="category__link sidebar-link">Retrieve Sub Account Balances</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/8-wallet.html#retrieve-personal-trading-fee" class="category__link sidebar-link">Retrieve Personal Trading Fee</a></div></div></div></div><div class="group__category category"><div class="category__label"><a href="/gate/9-spot.html" class="category__link sidebar-link">Spot</a></div> <div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#list-all-currencies-detail" class="category__link sidebar-link">List All Currencies' Detail</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#get-detail-of-one-particular-currency" class="category__link sidebar-link">Get Detail Of One Particular Currency</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#list-all-currency-pairs-supported" class="category__link sidebar-link">List All Currency Pairs Supported</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#get-detail-of-one-single-order" class="category__link sidebar-link">Get Detail Of One Single Order</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#retrieve-ticker-information" class="category__link sidebar-link">Retrieve Ticker Information</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#retrieve-order-book" class="category__link sidebar-link">Retrieve Order Book</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#retrieve-market-trades" class="category__link sidebar-link">Retrieve Market Trades</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#market-candlesticks" class="category__link sidebar-link">Market Candlesticks</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#query-user-trading-fee-rates" class="category__link sidebar-link">Query User Trading Fee Rates</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#list-spot-accounts" class="category__link sidebar-link">List Spot Accounts</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#create-a-batch-of-orders" class="category__link sidebar-link">Create A Batch Of Orders</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#list-all-open-orders" class="category__link sidebar-link">List All Open Orders</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#create-an-order" class="category__link sidebar-link">Create An Order</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#list-orders" class="category__link sidebar-link">List Orders</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#cancel-all-open-orders-in-specified-currency-pair" class="category__link sidebar-link">Cancel All Open Orders In Specified Currency Pair</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#cancel-a-batch-of-orders-with-an-id-list" class="category__link sidebar-link">Cancel A Batch Of Orders With An Id List</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#get-a-single-order" class="category__link sidebar-link">Get A Single Order</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#cancel-a-single-order" class="category__link sidebar-link">Cancel A Single Order</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#list-personal-trading-history" class="category__link sidebar-link">List Personal Trading History</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#create-a-price-triggered-order" class="category__link sidebar-link">Create A Price-Triggered Order</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#retrieve-running-auto-order-list" class="category__link sidebar-link">Retrieve Running Auto Order List</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#cancel-all-open-orders" class="category__link sidebar-link">Cancel All Open Orders</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#get-a-single-order-2" class="category__link sidebar-link">Get A Single Order</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/9-spot.html#cancel-a-single-order-2" class="category__link sidebar-link">Cancel A Single Order</a></div></div></div></div><div class="group__category category category--selected category--active"><div class="category__label"><a href="/gate/10-margin.html" aria-current="page" class="category__link sidebar-link router-link-exact-active router-link-active">Margin</a></div> <div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#list-all-supported-currency-pairs-supported-in-margin-trading" class="category__link sidebar-link">List All Supported Currency Pairs Supported In Margin Trading</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#query-one-single-margin-currency-pair" class="category__link sidebar-link">Query One Single Margin Currency Pair</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#order-book-of-lending-loans" class="category__link sidebar-link">Order Book Of Lending Loans</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#margin-account-list" class="category__link sidebar-link">Margin Account List</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#list-margin-account-balance-change-history" class="category__link sidebar-link">List Margin Account Balance Change History</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#funding-account-list" class="category__link sidebar-link">Funding Account List</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#lend-or-borrow" class="category__link sidebar-link">Lend Or Borrow</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#list-all-loans" class="category__link sidebar-link">List All Loans</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#merge-multiple-lending-loans" class="category__link sidebar-link">Merge Multiple Lending Loans</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#retrieve-one-single-loan-detail" class="category__link sidebar-link">Retrieve One Single Loan Detail</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#modify-a-loan" class="category__link sidebar-link">Modify A Loan</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#cancel-lending-loan" class="category__link sidebar-link">Cancel Lending Loan</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#repay-a-loan" class="category__link sidebar-link">Repay A Loan</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#list-loan-repayment-records" class="category__link sidebar-link">List Loan Repayment Records</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#list-repayment-records-of-specified-loan" class="category__link sidebar-link">List Repayment Records Of Specified Loan</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#get-one-single-loan-record" class="category__link sidebar-link">Get One Single Loan Record</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#modify-a-loan-record" class="category__link sidebar-link">Modify A Loan Record</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#update-user-s-auto-repayment-setting" class="category__link sidebar-link">Update User's Auto Repayment Setting</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#retrieve-user-auto-repayment-setting" class="category__link sidebar-link">Retrieve User Auto Repayment Setting</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#max-transferable-amount-for-specified-margin-currency" class="category__link sidebar-link">Max Transferable Amount For Specified Margin Currency</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#逐仓杠杆用户最多可借入" class="category__link sidebar-link">逐仓杠杆用户最多可借入</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#currencies-supported-by-cross-margin" class="category__link sidebar-link">Currencies Supported By Cross Margin.</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#retrieve-detail-of-one-single-currency-supported-by-cross-margin" class="category__link sidebar-link">Retrieve Detail Of One Single Currency Supported By Cross Margin</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#retrieve-cross-margin-account" class="category__link sidebar-link">Retrieve Cross Margin Account</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#retrieve-cross-margin-account-change-history" class="category__link sidebar-link">Retrieve Cross Margin Account Change History</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#create-a-cross-margin-borrow-loan" class="category__link sidebar-link">Create A Cross Margin Borrow Loan</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#list-cross-margin-borrow-history" class="category__link sidebar-link">List Cross Margin Borrow History</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#retrieve-single-borrow-loan-detail" class="category__link sidebar-link">Retrieve Single Borrow Loan Detail</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#repay-cross-margin-loan" class="category__link sidebar-link">Repay Cross Margin Loan</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#retrieve-cross-margin-repayments" class="category__link sidebar-link">Retrieve Cross Margin Repayments</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#max-transferable-amount-for-specified-cross-margin-currency" class="category__link sidebar-link">Max Transferable Amount For Specified Cross Margin Currency</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/10-margin.html#全仓杠杆用户最多可借入" class="category__link sidebar-link">全仓杠杆用户最多可借入</a></div></div></div></div><div class="group__category category"><div class="category__label"><a href="/gate/11-futures.html" class="category__link sidebar-link">Futures</a></div> <div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#list-all-futures-contracts" class="category__link sidebar-link">List All Futures Contracts</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#get-a-single-contract" class="category__link sidebar-link">Get A Single Contract</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#futures-order-book" class="category__link sidebar-link">Futures Order Book</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#futures-trading-history" class="category__link sidebar-link">Futures Trading History</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#get-futures-candlesticks" class="category__link sidebar-link">Get Futures Candlesticks</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#list-futures-tickers" class="category__link sidebar-link">List Futures Tickers</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#funding-rate-history" class="category__link sidebar-link">Funding Rate History</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#futures-insurance-balance-history" class="category__link sidebar-link">Futures Insurance Balance History</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#futures-stats" class="category__link sidebar-link">Futures Stats</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#retrieve-liquidation-history" class="category__link sidebar-link">Retrieve Liquidation History</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#query-futures-account" class="category__link sidebar-link">Query Futures Account</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#query-account-book" class="category__link sidebar-link">Query Account Book</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#list-all-positions-of-a-user" class="category__link sidebar-link">List All Positions Of A User</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#get-single-position" class="category__link sidebar-link">Get Single Position</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#update-position-margin" class="category__link sidebar-link">Update Position Margin</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#update-position-leverage" class="category__link sidebar-link">Update Position Leverage</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#update-position-risk-limit" class="category__link sidebar-link">Update Position Risk Limit</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#enable-or-disable-dual-mode" class="category__link sidebar-link">Enable Or Disable Dual Mode</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#retrieve-position-detail-in-dual-mode" class="category__link sidebar-link">Retrieve Position Detail In Dual Mode</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#update-position-margin-in-dual-mode" class="category__link sidebar-link">Update Position Margin In Dual Mode</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#update-position-leverage-in-dual-mode" class="category__link sidebar-link">Update Position Leverage In Dual Mode</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#update-position-risk-limit-in-dual-mode" class="category__link sidebar-link">Update Position Risk Limit In Dual Mode</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#create-a-futures-order" class="category__link sidebar-link">Create A Futures Order</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#list-futures-orders" class="category__link sidebar-link">List Futures Orders</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#cancel-all-open-orders-matched" class="category__link sidebar-link">Cancel All Open Orders Matched</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#get-a-single-order" class="category__link sidebar-link">Get A Single Order</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#cancel-a-single-order" class="category__link sidebar-link">Cancel A Single Order</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#list-personal-trading-history" class="category__link sidebar-link">List Personal Trading History</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#list-position-close-history" class="category__link sidebar-link">List Position Close History</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#list-liquidation-history" class="category__link sidebar-link">List Liquidation History</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#create-a-price-triggered-order" class="category__link sidebar-link">Create A Price-Triggered Order</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#list-all-auto-orders" class="category__link sidebar-link">List All Auto Orders</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#cancel-all-open-orders" class="category__link sidebar-link">Cancel All Open Orders</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#get-a-single-order-2" class="category__link sidebar-link">Get A Single Order</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/11-futures.html#cancel-a-single-order-2" class="category__link sidebar-link">Cancel A Single Order</a></div></div></div></div><div class="group__category category"><div class="category__label"><a href="/gate/12-delivery.html" class="category__link sidebar-link">Delivery</a></div> <div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#list-all-futures-contracts" class="category__link sidebar-link">List All Futures Contracts</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#get-a-single-contract" class="category__link sidebar-link">Get A Single Contract</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#futures-order-book" class="category__link sidebar-link">Futures Order Book</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#futures-trading-history" class="category__link sidebar-link">Futures Trading History</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#get-futures-candlesticks" class="category__link sidebar-link">Get Futures Candlesticks</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#list-futures-tickers" class="category__link sidebar-link">List Futures Tickers</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#futures-insurance-balance-history" class="category__link sidebar-link">Futures Insurance Balance History</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#retrieve-liquidation-history" class="category__link sidebar-link">Retrieve Liquidation History</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#query-futures-account" class="category__link sidebar-link">Query Futures Account</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#query-account-book" class="category__link sidebar-link">Query Account Book</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#list-all-positions-of-a-user" class="category__link sidebar-link">List All Positions Of A User</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#get-single-position" class="category__link sidebar-link">Get Single Position</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#update-position-margin" class="category__link sidebar-link">Update Position Margin</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#update-position-leverage" class="category__link sidebar-link">Update Position Leverage</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#update-position-risk-limit" class="category__link sidebar-link">Update Position Risk Limit</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#enable-or-disable-dual-mode" class="category__link sidebar-link">Enable Or Disable Dual Mode</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#retrieve-position-detail-in-dual-mode" class="category__link sidebar-link">Retrieve Position Detail In Dual Mode</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#update-position-margin-in-dual-mode" class="category__link sidebar-link">Update Position Margin In Dual Mode</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#update-position-leverage-in-dual-mode" class="category__link sidebar-link">Update Position Leverage In Dual Mode</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#update-position-risk-limit-in-dual-mode" class="category__link sidebar-link">Update Position Risk Limit In Dual Mode</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#create-a-futures-order" class="category__link sidebar-link">Create A Futures Order</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#list-futures-orders" class="category__link sidebar-link">List Futures Orders</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#cancel-all-open-orders-matched" class="category__link sidebar-link">Cancel All Open Orders Matched</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#get-a-single-order" class="category__link sidebar-link">Get A Single Order</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#cancel-a-single-order" class="category__link sidebar-link">Cancel A Single Order</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#list-personal-trading-history" class="category__link sidebar-link">List Personal Trading History</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#list-position-close-history" class="category__link sidebar-link">List Position Close History</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#list-liquidation-history" class="category__link sidebar-link">List Liquidation History</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#list-settlement-history" class="category__link sidebar-link">List Settlement History</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#create-a-price-triggered-order" class="category__link sidebar-link">Create A Price-Triggered Order</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#list-all-auto-orders" class="category__link sidebar-link">List All Auto Orders</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#cancel-all-open-orders" class="category__link sidebar-link">Cancel All Open Orders</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#get-a-single-order-2" class="category__link sidebar-link">Get A Single Order</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/12-delivery.html#cancel-a-single-order-2" class="category__link sidebar-link">Cancel A Single Order</a></div></div></div></div><div class="group__category category"><div class="category__label"><a href="/gate/13-schemas.html" class="category__link sidebar-link">Schemas</a></div> <div><div class="category__headers"><div class="category__header-item"><a href="/gate/13-schemas.html#properties" class="category__link sidebar-link">Properties</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/13-schemas.html#properties-2" class="category__link sidebar-link">Properties</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/13-schemas.html#properties-3" class="category__link sidebar-link">Properties</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/13-schemas.html#properties-4" class="category__link sidebar-link">Properties</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/13-schemas.html#properties-5" class="category__link sidebar-link">Properties</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/13-schemas.html#properties-6" class="category__link sidebar-link">Properties</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/13-schemas.html#properties-7" class="category__link sidebar-link">Properties</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/13-schemas.html#properties-8" class="category__link sidebar-link">Properties</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/13-schemas.html#properties-9" class="category__link sidebar-link">Properties</a></div></div><div class="category__headers"><div class="category__header-item"><a href="/gate/13-schemas.html#properties-10" class="category__link sidebar-link">Properties</a></div></div></div></div></div></div></div></div></div> <div class="col-md-9 col-lg-10 content__container"><ul class="code_lang"><li id="python" class="activeCode">Python</li> <li id="shell">Shell</li></ul> <div class="page__container"><div custom="" class="content__default"><div class="content-block"><div class="content-block__heading"></div> <div class="content-block__body"><div class="content-block__cont"><h1 id="gate-api-v4-margin">Margin</h1> <p>Margin API; margin trading uses spot trading API</p> <h2 id="list-all-supported-currency-pairs-supported-in-margin-trading"><a href="#list-all-supported-currency-pairs-supported-in-margin-trading" class="header-anchor">#</a> List all supported currency pairs supported in margin trading</h2> <p><a id="opIdlistMarginCurrencyPairs"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/currency_pairs'</span>
query_param <span class="token operator">=</span> <span class="token string">''</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>
<span class="token function">curl</span> -X GET https://api.gateio.ws/api/v4/margin/currency_pairs <span class="token punctuation">\</span>
  -H <span class="token string">'Accept: application/json'</span>

</code></pre></div><p><code>GET /margin/currency_pairs</code></p> <p><em>List all supported currency pairs supported in margin trading</em></p> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH_USDT&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;base&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;quote&quot;</span><span class="token operator">:</span> <span class="token string">&quot;USDT&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;leverage&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token property">&quot;min_base_amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.01&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;min_quote_amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;100&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;max_quote_amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1000000&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="listmargincurrencypairs-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>List retrieved</td> <td>[Inline]</td></tr></tbody></table> <h3 id="listmargincurrencypairs-responseschema">Response Schema</h3> <p>Status Code <strong>200</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><em>None</em></td> <td>array</td> <td>none</td></tr> <tr><td>» id</td> <td>string</td> <td>Currency pair</td></tr> <tr><td>» base</td> <td>string</td> <td>Base currency</td></tr> <tr><td>» quote</td> <td>string</td> <td>Quote currency</td></tr> <tr><td>» leverage</td> <td>integer</td> <td>Leverage</td></tr> <tr><td>» min_base_amount</td> <td>string</td> <td>Minimum base currency to loan, <code>null</code> means no limit</td></tr> <tr><td>» min_quote_amount</td> <td>string</td> <td>Minimum quote currency to loan, <code>null</code> means no limit</td></tr> <tr><td>» max_quote_amount</td> <td>string</td> <td>Maximum borrowable amount for quote currency. Base currency limit is calculated by quote maximum and market price. <code>null</code> means no limit</td></tr></tbody></table> <aside class="success">
This operation does not require authentication
</aside> <h2 id="query-one-single-margin-currency-pair"><a href="#query-one-single-margin-currency-pair" class="header-anchor">#</a> Query one single margin currency pair</h2> <p><a id="opIdgetMarginCurrencyPair"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/currency_pairs/BTC_USDT'</span>
query_param <span class="token operator">=</span> <span class="token string">''</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>
<span class="token function">curl</span> -X GET https://api.gateio.ws/api/v4/margin/currency_pairs/BTC_USDT <span class="token punctuation">\</span>
  -H <span class="token string">'Accept: application/json'</span>

</code></pre></div><p><code>GET /margin/currency_pairs/{currency_pair}</code></p> <p><em>Query one single margin currency pair</em></p> <h3 id="getmargincurrencypair-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>currency_pair</td> <td>path</td> <td>string</td> <td>true</td> <td>Margin currency pair</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH_USDT&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;base&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;quote&quot;</span><span class="token operator">:</span> <span class="token string">&quot;USDT&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;leverage&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token property">&quot;min_base_amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.01&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;min_quote_amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;100&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;max_quote_amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1000000&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="getmargincurrencypair-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Successfully retrieved</td> <td>Inline</td></tr></tbody></table> <h3 id="getmargincurrencypair-responseschema">Response Schema</h3> <p>Status Code <strong>200</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>» id</td> <td>string</td> <td>Currency pair</td></tr> <tr><td>» base</td> <td>string</td> <td>Base currency</td></tr> <tr><td>» quote</td> <td>string</td> <td>Quote currency</td></tr> <tr><td>» leverage</td> <td>integer</td> <td>Leverage</td></tr> <tr><td>» min_base_amount</td> <td>string</td> <td>Minimum base currency to loan, <code>null</code> means no limit</td></tr> <tr><td>» min_quote_amount</td> <td>string</td> <td>Minimum quote currency to loan, <code>null</code> means no limit</td></tr> <tr><td>» max_quote_amount</td> <td>string</td> <td>Maximum borrowable amount for quote currency. Base currency limit is calculated by quote maximum and market price. <code>null</code> means no limit</td></tr></tbody></table> <aside class="success">
This operation does not require authentication
</aside> <h2 id="order-book-of-lending-loans"><a href="#order-book-of-lending-loans" class="header-anchor">#</a> Order book of lending loans</h2> <p><a id="opIdlistFundingBook"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/funding_book'</span>
query_param <span class="token operator">=</span> <span class="token string">'currency=BTC'</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url <span class="token operator">+</span> <span class="token string">&quot;?&quot;</span> <span class="token operator">+</span> query_param<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>
<span class="token function">curl</span> -X GET https://api.gateio.ws/api/v4/margin/funding_book?currency<span class="token operator">=</span>BTC <span class="token punctuation">\</span>
  -H <span class="token string">'Accept: application/json'</span>

</code></pre></div><p><code>GET /margin/funding_book</code></p> <p><em>Order book of lending loans</em></p> <h3 id="listfundingbook-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>currency</td> <td>query</td> <td>string</td> <td>true</td> <td>Retrieved specified currency related data</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.002&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;320.03&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;days&quot;</span><span class="token operator">:</span> <span class="token number">10</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="listfundingbook-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Order book retrieved</td> <td>[Inline]</td></tr></tbody></table> <h3 id="listfundingbook-responseschema">Response Schema</h3> <p>Status Code <strong>200</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>» rate</td> <td>string</td> <td>Loan rate</td></tr> <tr><td>» amount</td> <td>string</td> <td>Borrowable amount</td></tr> <tr><td>» days</td> <td>integer</td> <td>How long the loan should be repaid</td></tr></tbody></table> <aside class="success">
This operation does not require authentication
</aside> <h2 id="margin-account-list"><a href="#margin-account-list" class="header-anchor">#</a> Margin account list</h2> <p><a id="opIdlistMarginAccounts"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/accounts'</span>
query_param <span class="token operator">=</span> <span class="token string">''</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;GET&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/accounts&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">''</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>GET /margin/accounts</code></p> <p><em>Margin account list</em></p> <h3 id="listmarginaccounts-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>currency_pair</td> <td>query</td> <td>string</td> <td>false</td> <td>Currency pair</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;currency_pair&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH_BTC&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;base&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;available&quot;</span><span class="token operator">:</span> <span class="token string">&quot;30.1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;locked&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;borrowed&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10.1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;quote&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;available&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;locked&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;borrowed&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.5&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="listmarginaccounts-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>List retrieved</td> <td>[Inline]</td></tr></tbody></table> <h3 id="listmarginaccounts-responseschema">Response Schema</h3> <p>Status Code <strong>200</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>» <em>None</em></td> <td>object</td> <td>Margin account detail. <code>base</code> refers to base currency, while `quotes to quote currency</td></tr> <tr><td>»» currency_pair</td> <td>string</td> <td>Currency pair</td></tr> <tr><td>»» base</td> <td>object</td> <td>Account currency detail</td></tr> <tr><td>»»» currency</td> <td>string</td> <td>Currency name</td></tr> <tr><td>»»» available</td> <td>string</td> <td>Amount suitable for margin trading.</td></tr> <tr><td>»»» locked</td> <td>string</td> <td>Locked amount, used in margin trading</td></tr> <tr><td>»»» borrowed</td> <td>string</td> <td>Borrowed amount</td></tr> <tr><td>»»» interest</td> <td>string</td> <td>Interests unpaid</td></tr> <tr><td>»» quote</td> <td>object</td> <td>Account currency detail</td></tr> <tr><td>»»» currency</td> <td>string</td> <td>Currency name</td></tr> <tr><td>»»» available</td> <td>string</td> <td>Amount suitable for margin trading.</td></tr> <tr><td>»»» locked</td> <td>string</td> <td>Locked amount, used in margin trading</td></tr> <tr><td>»»» borrowed</td> <td>string</td> <td>Borrowed amount</td></tr> <tr><td>»»» interest</td> <td>string</td> <td>Interests unpaid</td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="list-margin-account-balance-change-history"><a href="#list-margin-account-balance-change-history" class="header-anchor">#</a> List margin account balance change history</h2> <p><a id="opIdlistMarginAccountBook"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/account_book'</span>
query_param <span class="token operator">=</span> <span class="token string">''</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;GET&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/account_book&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">''</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>GET /margin/account_book</code></p> <p><em>List margin account balance change history</em></p> <p>Only transferals from and to margin account are provided for now. Time range allows 30 days at most</p> <h3 id="listmarginaccountbook-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>currency</td> <td>query</td> <td>string</td> <td>false</td> <td>List records related to specified currency only. If specified, <code>currency_pair</code> is also required.</td></tr> <tr><td>currency_pair</td> <td>query</td> <td>string</td> <td>false</td> <td>List records related to specified currency pair. Used in combination with <code>currency</code>. Ignored if <code>currency</code> is not provided</td></tr> <tr><td>from</td> <td>query</td> <td>integer(int64)</td> <td>false</td> <td>Time range beginning, default to 7 days before current time</td></tr> <tr><td>to</td> <td>query</td> <td>integer(int64)</td> <td>false</td> <td>Time range ending, default to current time</td></tr> <tr><td>page</td> <td>query</td> <td>integer</td> <td>false</td> <td>Page number</td></tr> <tr><td>limit</td> <td>query</td> <td>integer</td> <td>false</td> <td>Maximum number of records returned in one list</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1547633726&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;time_ms&quot;</span><span class="token operator">:</span> <span class="token number">1547633726123</span><span class="token punctuation">,</span>
    <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;currency_pair&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC_USDT&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;change&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.03&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.59316525194&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="listmarginaccountbook-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>List retrieved</td> <td>[Inline]</td></tr></tbody></table> <h3 id="listmarginaccountbook-responseschema">Response Schema</h3> <p>Status Code <strong>200</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>» id</td> <td>string</td> <td>Balance change record ID</td></tr> <tr><td>» time</td> <td>string</td> <td>Balance changed timestamp</td></tr> <tr><td>» time_ms</td> <td>integer(int64)</td> <td>Account changed timestamp in milliseconds</td></tr> <tr><td>» currency</td> <td>string</td> <td>Currency changed</td></tr> <tr><td>» currency_pair</td> <td>string</td> <td>Account currency pair</td></tr> <tr><td>» change</td> <td>string</td> <td>Amount changed. Positive value means transferring in, while negative out</td></tr> <tr><td>» balance</td> <td>string</td> <td>Balance after change</td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="funding-account-list"><a href="#funding-account-list" class="header-anchor">#</a> Funding account list</h2> <p><a id="opIdlistFundingAccounts"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/funding_accounts'</span>
query_param <span class="token operator">=</span> <span class="token string">''</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;GET&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/funding_accounts&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">''</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>GET /margin/funding_accounts</code></p> <p><em>Funding account list</em></p> <h3 id="listfundingaccounts-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>currency</td> <td>query</td> <td>string</td> <td>false</td> <td>Retrieved specified currency related data</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;available&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.238&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;locked&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lent&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.32&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;total_lent&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.32&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="listfundingaccounts-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>List retrieved</td> <td>[Inline]</td></tr></tbody></table> <h3 id="listfundingaccounts-responseschema">Response Schema</h3> <p>Status Code <strong>200</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>» currency</td> <td>string</td> <td>Currency name</td></tr> <tr><td>» available</td> <td>string</td> <td>Available assets to lend, which is identical to spot account <code>available</code></td></tr> <tr><td>» locked</td> <td>string</td> <td>Locked amount. i.e. amount in <code>open</code> loans</td></tr> <tr><td>» lent</td> <td>string</td> <td>Amount that is loaned but not repaid</td></tr> <tr><td>» total_lent</td> <td>string</td> <td>Amount used for lending. total_lent = lent + locked</td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="lend-or-borrow"><a href="#lend-or-borrow" class="header-anchor">#</a> Lend or borrow</h2> <p><a id="opIdcreateLoan"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/loans'</span>
query_param <span class="token operator">=</span> <span class="token string">''</span>
body<span class="token operator">=</span><span class="token string">'{&quot;side&quot;:&quot;borrow&quot;,&quot;currency&quot;:&quot;BTC&quot;,&quot;rate&quot;:&quot;0.002&quot;,&quot;amount&quot;:&quot;1.5&quot;,&quot;days&quot;:10,&quot;auto_renew&quot;:true,&quot;currency_pair&quot;:&quot;ETH_BTC&quot;,&quot;fee_rate&quot;:&quot;0.18&quot;,&quot;orig_id&quot;:&quot;123424&quot;}'</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">,</span> body<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> data<span class="token operator">=</span>body<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;POST&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/loans&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">'{&quot;side&quot;:&quot;borrow&quot;,&quot;currency&quot;:&quot;BTC&quot;,&quot;rate&quot;:&quot;0.002&quot;,&quot;amount&quot;:&quot;1.5&quot;,&quot;days&quot;:10,&quot;auto_renew&quot;:true,&quot;currency_pair&quot;:&quot;ETH_BTC&quot;,&quot;fee_rate&quot;:&quot;0.18&quot;,&quot;orig_id&quot;:&quot;123424&quot;}'</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> -d <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> -H <span class="token string">&quot;Content-Type: application/json&quot;</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>POST /margin/loans</code></p> <p><em>Lend or borrow</em></p> <blockquote><p>Body parameter</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;side&quot;</span><span class="token operator">:</span> <span class="token string">&quot;borrow&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.002&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.5&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;days&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token property">&quot;auto_renew&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency_pair&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH_BTC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fee_rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.18&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;orig_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123424&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="createloan-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>body</td> <td>body</td> <td><a href="#schemaloan">Loan</a></td> <td>true</td> <td>none</td></tr> <tr><td>» side</td> <td>body</td> <td>string</td> <td>true</td> <td>Loan side</td></tr> <tr><td>» currency</td> <td>body</td> <td>string</td> <td>true</td> <td>Loan currency</td></tr> <tr><td>» rate</td> <td>body</td> <td>string</td> <td>false</td> <td>Loan rate. Only rates in [0.0002, 0.002] are supported.</td></tr> <tr><td>» amount</td> <td>body</td> <td>string</td> <td>true</td> <td>Loan amount</td></tr> <tr><td>» days</td> <td>body</td> <td>integer</td> <td>true</td> <td>Loan days</td></tr> <tr><td>» auto_renew</td> <td>body</td> <td>boolean</td> <td>false</td> <td>Auto renew the loan on expiration</td></tr> <tr><td>» currency_pair</td> <td>body</td> <td>string</td> <td>false</td> <td>Currency pair. Required for borrowing side</td></tr> <tr><td>» fee_rate</td> <td>body</td> <td>string</td> <td>false</td> <td>Loan fee rate</td></tr> <tr><td>» orig_id</td> <td>body</td> <td>string</td> <td>false</td> <td>Original loan ID if the loan is auto-renewed. Equal to <code>id</code> if not</td></tr></tbody></table> <h4 id="detailed-descriptions"><a href="#detailed-descriptions" class="header-anchor">#</a> Detailed descriptions</h4> <p><strong>» rate</strong>: Loan rate. Only rates in [0.0002, 0.002] are supported.</p> <p>Not required in lending. Market rate calculated from recent rates will be used if not set</p> <h4 id="enumerated-values"><a href="#enumerated-values" class="header-anchor">#</a> Enumerated Values</h4> <table><thead><tr><th>Parameter</th> <th>Value</th></tr></thead> <tbody><tr><td>» side</td> <td>lend</td></tr> <tr><td>» side</td> <td>borrow</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>201 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123435&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1548000000&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;expire_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1548100000&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;side&quot;</span><span class="token operator">:</span> <span class="token string">&quot;borrow&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;loaned&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.002&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.5&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;days&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token property">&quot;auto_renew&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency_pair&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH_BTC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;left&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;repaid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;paid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;unpaid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fee_rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.18&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;orig_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123424&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="createloan-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>201</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.2" target="_blank" rel="noopener noreferrer">Created<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Loan created</td> <td><a href="#schemaloan">Loan</a></td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="list-all-loans"><a href="#list-all-loans" class="header-anchor">#</a> List all loans</h2> <p><a id="opIdlistLoans"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/loans'</span>
query_param <span class="token operator">=</span> <span class="token string">'status=open&amp;side=lend'</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url <span class="token operator">+</span> <span class="token string">&quot;?&quot;</span> <span class="token operator">+</span> query_param<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;GET&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/loans&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;status=open&amp;side=lend&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">''</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>?<span class="token variable">$query_param</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>GET /margin/loans</code></p> <p><em>List all loans</em></p> <h3 id="listloans-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>status</td> <td>query</td> <td>string</td> <td>true</td> <td>Loan status</td></tr> <tr><td>side</td> <td>query</td> <td>string</td> <td>true</td> <td>Lend or borrow</td></tr> <tr><td>currency</td> <td>query</td> <td>string</td> <td>false</td> <td>Retrieved specified currency related data</td></tr> <tr><td>currency_pair</td> <td>query</td> <td>string</td> <td>false</td> <td>Currency pair</td></tr> <tr><td>sort_by</td> <td>query</td> <td>string</td> <td>false</td> <td>Specify which field is used to sort. <code>create_time</code> or <code>rate</code> is supported. Default to <code>create_time</code></td></tr> <tr><td>reverse_sort</td> <td>query</td> <td>boolean</td> <td>false</td> <td>Whether to sort in descending order. Default to <code>true</code></td></tr> <tr><td>page</td> <td>query</td> <td>integer</td> <td>false</td> <td>Page number</td></tr> <tr><td>limit</td> <td>query</td> <td>integer</td> <td>false</td> <td>Maximum number of records returned in one list</td></tr></tbody></table> <h4 id="enumerated-values-2"><a href="#enumerated-values-2" class="header-anchor">#</a> Enumerated Values</h4> <table><thead><tr><th>Parameter</th> <th>Value</th></tr></thead> <tbody><tr><td>status</td> <td>open</td></tr> <tr><td>status</td> <td>loaned</td></tr> <tr><td>status</td> <td>finished</td></tr> <tr><td>status</td> <td>auto_repaid</td></tr> <tr><td>side</td> <td>lend</td></tr> <tr><td>side</td> <td>borrow</td></tr> <tr><td>sort_by</td> <td>create_time</td></tr> <tr><td>sort_by</td> <td>rate</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123435&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1548000000&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;expire_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1548100000&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;side&quot;</span><span class="token operator">:</span> <span class="token string">&quot;borrow&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;loaned&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.002&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.5&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;days&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token property">&quot;auto_renew&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;currency_pair&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH_BTC&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;left&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;repaid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;paid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;unpaid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;fee_rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.18&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;orig_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123424&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="listloans-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>List retrieved</td> <td>[<a href="#schemaloan">Loan</a>]</td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="merge-multiple-lending-loans"><a href="#merge-multiple-lending-loans" class="header-anchor">#</a> Merge multiple lending loans</h2> <p><a id="opIdmergeLoans"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/merged_loans'</span>
query_param <span class="token operator">=</span> <span class="token string">'currency=BTC&amp;ids=123,234,345'</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url <span class="token operator">+</span> <span class="token string">&quot;?&quot;</span> <span class="token operator">+</span> query_param<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;POST&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/merged_loans&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;currency=BTC&amp;ids=123,234,345&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">''</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>?<span class="token variable">$query_param</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>POST /margin/merged_loans</code></p> <p><em>Merge multiple lending loans</em></p> <h3 id="mergeloans-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>currency</td> <td>query</td> <td>string</td> <td>true</td> <td>Retrieved specified currency related data</td></tr> <tr><td>ids</td> <td>query</td> <td>string</td> <td>true</td> <td>Lending loan ID list separated by <code>,</code>. Maximum of 20 IDs are allowed in one request</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>201 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123435&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1548000000&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;expire_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1548100000&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;side&quot;</span><span class="token operator">:</span> <span class="token string">&quot;borrow&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;loaned&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.002&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.5&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;days&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token property">&quot;auto_renew&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency_pair&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH_BTC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;left&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;repaid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;paid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;unpaid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fee_rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.18&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;orig_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123424&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="mergeloans-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>201</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.2" target="_blank" rel="noopener noreferrer">Created<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Loans merged</td> <td><a href="#schemaloan">Loan</a></td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="retrieve-one-single-loan-detail"><a href="#retrieve-one-single-loan-detail" class="header-anchor">#</a> Retrieve one single loan detail</h2> <p><a id="opIdgetLoan"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/loans/12345'</span>
query_param <span class="token operator">=</span> <span class="token string">'side=lend'</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url <span class="token operator">+</span> <span class="token string">&quot;?&quot;</span> <span class="token operator">+</span> query_param<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;GET&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/loans/12345&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;side=lend&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">''</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>?<span class="token variable">$query_param</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>GET /margin/loans/{loan_id}</code></p> <p><em>Retrieve one single loan detail</em></p> <h3 id="getloan-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>side</td> <td>query</td> <td>string</td> <td>true</td> <td>Lend or borrow</td></tr> <tr><td>loan_id</td> <td>path</td> <td>string</td> <td>true</td> <td>Loan ID</td></tr></tbody></table> <h4 id="enumerated-values-3"><a href="#enumerated-values-3" class="header-anchor">#</a> Enumerated Values</h4> <table><thead><tr><th>Parameter</th> <th>Value</th></tr></thead> <tbody><tr><td>side</td> <td>lend</td></tr> <tr><td>side</td> <td>borrow</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123435&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1548000000&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;expire_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1548100000&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;side&quot;</span><span class="token operator">:</span> <span class="token string">&quot;borrow&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;loaned&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.002&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.5&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;days&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token property">&quot;auto_renew&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency_pair&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH_BTC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;left&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;repaid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;paid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;unpaid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fee_rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.18&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;orig_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123424&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="getloan-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>List retrieved</td> <td><a href="#schemaloan">Loan</a></td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="modify-a-loan"><a href="#modify-a-loan" class="header-anchor">#</a> Modify a loan</h2> <p><a id="opIdupdateLoan"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/loans/12345'</span>
query_param <span class="token operator">=</span> <span class="token string">''</span>
body<span class="token operator">=</span><span class="token string">'{&quot;currency&quot;:&quot;BTC&quot;,&quot;side&quot;:&quot;borrow&quot;,&quot;currency_pair&quot;:&quot;BTC_USDT&quot;,&quot;auto_renew&quot;:false}'</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'PATCH'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">,</span> body<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'PATCH'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> data<span class="token operator">=</span>body<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;PATCH&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/loans/12345&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">'{&quot;currency&quot;:&quot;BTC&quot;,&quot;side&quot;:&quot;borrow&quot;,&quot;currency_pair&quot;:&quot;BTC_USDT&quot;,&quot;auto_renew&quot;:false}'</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> -d <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> -H <span class="token string">&quot;Content-Type: application/json&quot;</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>PATCH /margin/loans/{loan_id}</code></p> <p><em>Modify a loan</em></p> <p>Only <code>auto_renew</code> modification is supported currently</p> <blockquote><p>Body parameter</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;side&quot;</span><span class="token operator">:</span> <span class="token string">&quot;borrow&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency_pair&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC_USDT&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;auto_renew&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="updateloan-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>body</td> <td>body</td> <td>object</td> <td>true</td> <td>none</td></tr> <tr><td>» currency</td> <td>body</td> <td>string</td> <td>true</td> <td>Loan currency</td></tr> <tr><td>» side</td> <td>body</td> <td>string</td> <td>true</td> <td>Loan side. Possible values are <code>lend</code> and <code>borrow</code>. For <code>LoanRecord</code> patching, only <code>lend</code> is supported</td></tr> <tr><td>» auto_renew</td> <td>body</td> <td>boolean</td> <td>true</td> <td>Auto renew</td></tr> <tr><td>» currency_pair</td> <td>body</td> <td>string</td> <td>false</td> <td>Currency pair. Required for borrowing side</td></tr> <tr><td>» loan_id</td> <td>body</td> <td>string</td> <td>false</td> <td>Loan ID. Required for <code>LoanRecord</code> patching</td></tr> <tr><td>loan_id</td> <td>path</td> <td>string</td> <td>true</td> <td>Loan ID</td></tr></tbody></table> <h4 id="enumerated-values-4"><a href="#enumerated-values-4" class="header-anchor">#</a> Enumerated Values</h4> <table><thead><tr><th>Parameter</th> <th>Value</th></tr></thead> <tbody><tr><td>» side</td> <td>lend</td></tr> <tr><td>» side</td> <td>borrow</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123435&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1548000000&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;expire_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1548100000&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;side&quot;</span><span class="token operator">:</span> <span class="token string">&quot;borrow&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;loaned&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.002&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.5&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;days&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token property">&quot;auto_renew&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency_pair&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH_BTC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;left&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;repaid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;paid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;unpaid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fee_rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.18&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;orig_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123424&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="updateloan-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Updated</td> <td><a href="#schemaloan">Loan</a></td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="cancel-lending-loan"><a href="#cancel-lending-loan" class="header-anchor">#</a> Cancel lending loan</h2> <p><a id="opIdcancelLoan"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/loans/12345'</span>
query_param <span class="token operator">=</span> <span class="token string">'currency=BTC'</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'DELETE'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'DELETE'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url <span class="token operator">+</span> <span class="token string">&quot;?&quot;</span> <span class="token operator">+</span> query_param<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;DELETE&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/loans/12345&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;currency=BTC&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">''</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>?<span class="token variable">$query_param</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>DELETE /margin/loans/{loan_id}</code></p> <p><em>Cancel lending loan</em></p> <p>Only lending loans can be cancelled</p> <h3 id="cancelloan-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>currency</td> <td>query</td> <td>string</td> <td>true</td> <td>Retrieved specified currency related data</td></tr> <tr><td>loan_id</td> <td>path</td> <td>string</td> <td>true</td> <td>Loan ID</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123435&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1548000000&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;expire_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1548100000&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;side&quot;</span><span class="token operator">:</span> <span class="token string">&quot;borrow&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;loaned&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.002&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.5&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;days&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token property">&quot;auto_renew&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency_pair&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH_BTC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;left&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;repaid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;paid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;unpaid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fee_rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.18&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;orig_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123424&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="cancelloan-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Order cancelled</td> <td><a href="#schemaloan">Loan</a></td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="repay-a-loan"><a href="#repay-a-loan" class="header-anchor">#</a> Repay a loan</h2> <p><a id="opIdrepayLoan"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/loans/12345/repayment'</span>
query_param <span class="token operator">=</span> <span class="token string">''</span>
body<span class="token operator">=</span><span class="token string">'{&quot;currency_pair&quot;:&quot;ETH_BTC&quot;,&quot;currency&quot;:&quot;ETH&quot;,&quot;mode&quot;:&quot;partial&quot;,&quot;amount&quot;:&quot;100&quot;}'</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">,</span> body<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> data<span class="token operator">=</span>body<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;POST&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/loans/12345/repayment&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">'{&quot;currency_pair&quot;:&quot;ETH_BTC&quot;,&quot;currency&quot;:&quot;ETH&quot;,&quot;mode&quot;:&quot;partial&quot;,&quot;amount&quot;:&quot;100&quot;}'</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> -d <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> -H <span class="token string">&quot;Content-Type: application/json&quot;</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>POST /margin/loans/{loan_id}/repayment</code></p> <p><em>Repay a loan</em></p> <blockquote><p>Body parameter</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;currency_pair&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH_BTC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;mode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;partial&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;100&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="repayloan-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>body</td> <td>body</td> <td>object</td> <td>true</td> <td>none</td></tr> <tr><td>» currency_pair</td> <td>body</td> <td>string</td> <td>true</td> <td>Currency pair</td></tr> <tr><td>» currency</td> <td>body</td> <td>string</td> <td>true</td> <td>Loan currency</td></tr> <tr><td>» mode</td> <td>body</td> <td>string</td> <td>true</td> <td>Repay mode. all - repay all; partial - repay only some portion</td></tr> <tr><td>» amount</td> <td>body</td> <td>string</td> <td>false</td> <td>Repay amount. Required in <code>partial</code> mode</td></tr> <tr><td>loan_id</td> <td>path</td> <td>string</td> <td>true</td> <td>Loan ID</td></tr></tbody></table> <h4 id="enumerated-values-5"><a href="#enumerated-values-5" class="header-anchor">#</a> Enumerated Values</h4> <table><thead><tr><th>Parameter</th> <th>Value</th></tr></thead> <tbody><tr><td>» mode</td> <td>all</td></tr> <tr><td>» mode</td> <td>partial</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123435&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1548000000&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;expire_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1548100000&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;side&quot;</span><span class="token operator">:</span> <span class="token string">&quot;borrow&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;loaned&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.002&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.5&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;days&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token property">&quot;auto_renew&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency_pair&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH_BTC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;left&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;repaid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;paid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;unpaid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fee_rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.18&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;orig_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123424&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="repayloan-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Loan repaid</td> <td><a href="#schemaloan">Loan</a></td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="list-loan-repayment-records"><a href="#list-loan-repayment-records" class="header-anchor">#</a> List loan repayment records</h2> <p><a id="opIdlistLoanRepayments"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/loans/12345/repayment'</span>
query_param <span class="token operator">=</span> <span class="token string">''</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;GET&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/loans/12345/repayment&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">''</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>GET /margin/loans/{loan_id}/repayment</code></p> <p><em>List loan repayment records</em></p> <h3 id="listloanrepayments-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>loan_id</td> <td>path</td> <td>string</td> <td>true</td> <td>Loan ID</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12342323&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1578000000&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;principal&quot;</span><span class="token operator">:</span> <span class="token string">&quot;100&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="listloanrepayments-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>List retrieved</td> <td>[Inline]</td></tr></tbody></table> <h3 id="listloanrepayments-responseschema">Response Schema</h3> <p>Status Code <strong>200</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>» id</td> <td>string</td> <td>Loan record ID</td></tr> <tr><td>» create_time</td> <td>string</td> <td>Repayment time</td></tr> <tr><td>» principal</td> <td>string</td> <td>Repaid principal</td></tr> <tr><td>» interest</td> <td>string</td> <td>Repaid interest</td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="list-repayment-records-of-specified-loan"><a href="#list-repayment-records-of-specified-loan" class="header-anchor">#</a> List repayment records of specified loan</h2> <p><a id="opIdlistLoanRecords"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/loan_records'</span>
query_param <span class="token operator">=</span> <span class="token string">'loan_id=12345'</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url <span class="token operator">+</span> <span class="token string">&quot;?&quot;</span> <span class="token operator">+</span> query_param<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;GET&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/loan_records&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;loan_id=12345&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">''</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>?<span class="token variable">$query_param</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>GET /margin/loan_records</code></p> <p><em>List repayment records of specified loan</em></p> <h3 id="listloanrecords-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>loan_id</td> <td>query</td> <td>string</td> <td>true</td> <td>Loan ID</td></tr> <tr><td>status</td> <td>query</td> <td>string</td> <td>false</td> <td>Loan record status</td></tr> <tr><td>page</td> <td>query</td> <td>integer</td> <td>false</td> <td>Page number</td></tr> <tr><td>limit</td> <td>query</td> <td>integer</td> <td>false</td> <td>Maximum number of records returned in one list</td></tr></tbody></table> <h4 id="enumerated-values-6"><a href="#enumerated-values-6" class="header-anchor">#</a> Enumerated Values</h4> <table><thead><tr><th>Parameter</th> <th>Value</th></tr></thead> <tbody><tr><td>status</td> <td>loaned</td></tr> <tr><td>status</td> <td>finished</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;122342323&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;loan_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12840282&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1548000000&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;expire_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1548100000&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;loaned&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;borrow_user_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;******12&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.002&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.5&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;days&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token property">&quot;auto_renew&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;repaid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;paid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;unpaid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="listloanrecords-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>List retrieved</td> <td>[<a href="#schemaloanrecord">LoanRecord</a>]</td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="get-one-single-loan-record"><a href="#get-one-single-loan-record" class="header-anchor">#</a> Get one single loan record</h2> <p><a id="opIdgetLoanRecord"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/loan_records/12345'</span>
query_param <span class="token operator">=</span> <span class="token string">'loan_id=12345'</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url <span class="token operator">+</span> <span class="token string">&quot;?&quot;</span> <span class="token operator">+</span> query_param<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;GET&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/loan_records/12345&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;loan_id=12345&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">''</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>?<span class="token variable">$query_param</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>GET /margin/loan_records/{loan_record_id}</code></p> <p><em>Get one single loan record</em></p> <h3 id="getloanrecord-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>loan_id</td> <td>query</td> <td>string</td> <td>true</td> <td>Loan ID</td></tr> <tr><td>loan_record_id</td> <td>path</td> <td>string</td> <td>true</td> <td>Loan record ID</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;122342323&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;loan_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12840282&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1548000000&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;expire_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1548100000&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;loaned&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;borrow_user_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;******12&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.002&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.5&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;days&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token property">&quot;auto_renew&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;repaid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;paid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;unpaid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="getloanrecord-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Detail retrieved</td> <td><a href="#schemaloanrecord">LoanRecord</a></td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="modify-a-loan-record"><a href="#modify-a-loan-record" class="header-anchor">#</a> Modify a loan record</h2> <p><a id="opIdupdateLoanRecord"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/loan_records/12345'</span>
query_param <span class="token operator">=</span> <span class="token string">''</span>
body<span class="token operator">=</span><span class="token string">'{&quot;currency&quot;:&quot;BTC&quot;,&quot;side&quot;:&quot;borrow&quot;,&quot;currency_pair&quot;:&quot;BTC_USDT&quot;,&quot;auto_renew&quot;:false}'</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'PATCH'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">,</span> body<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'PATCH'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> data<span class="token operator">=</span>body<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;PATCH&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/loan_records/12345&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">'{&quot;currency&quot;:&quot;BTC&quot;,&quot;side&quot;:&quot;borrow&quot;,&quot;currency_pair&quot;:&quot;BTC_USDT&quot;,&quot;auto_renew&quot;:false}'</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> -d <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> -H <span class="token string">&quot;Content-Type: application/json&quot;</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>PATCH /margin/loan_records/{loan_record_id}</code></p> <p><em>Modify a loan record</em></p> <p>Only <code>auto_renew</code> modification is supported currently</p> <blockquote><p>Body parameter</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;side&quot;</span><span class="token operator">:</span> <span class="token string">&quot;borrow&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency_pair&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC_USDT&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;auto_renew&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="updateloanrecord-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>body</td> <td>body</td> <td>object</td> <td>true</td> <td>none</td></tr> <tr><td>» currency</td> <td>body</td> <td>string</td> <td>true</td> <td>Loan currency</td></tr> <tr><td>» side</td> <td>body</td> <td>string</td> <td>true</td> <td>Loan side. Possible values are <code>lend</code> and <code>borrow</code>. For <code>LoanRecord</code> patching, only <code>lend</code> is supported</td></tr> <tr><td>» auto_renew</td> <td>body</td> <td>boolean</td> <td>true</td> <td>Auto renew</td></tr> <tr><td>» currency_pair</td> <td>body</td> <td>string</td> <td>false</td> <td>Currency pair. Required for borrowing side</td></tr> <tr><td>» loan_id</td> <td>body</td> <td>string</td> <td>false</td> <td>Loan ID. Required for <code>LoanRecord</code> patching</td></tr> <tr><td>loan_record_id</td> <td>path</td> <td>string</td> <td>true</td> <td>Loan record ID</td></tr></tbody></table> <h4 id="enumerated-values-7"><a href="#enumerated-values-7" class="header-anchor">#</a> Enumerated Values</h4> <table><thead><tr><th>Parameter</th> <th>Value</th></tr></thead> <tbody><tr><td>» side</td> <td>lend</td></tr> <tr><td>» side</td> <td>borrow</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;122342323&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;loan_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12840282&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1548000000&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;expire_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1548100000&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;loaned&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;borrow_user_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;******12&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.002&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.5&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;days&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token property">&quot;auto_renew&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;repaid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;paid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;unpaid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="updateloanrecord-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Loan record updated</td> <td><a href="#schemaloanrecord">LoanRecord</a></td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="update-user-s-auto-repayment-setting"><a href="#update-user-s-auto-repayment-setting" class="header-anchor">#</a> Update user's auto repayment setting</h2> <p><a id="opIdsetAutoRepay"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/auto_repay'</span>
query_param <span class="token operator">=</span> <span class="token string">'status=on'</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url <span class="token operator">+</span> <span class="token string">&quot;?&quot;</span> <span class="token operator">+</span> query_param<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;POST&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/auto_repay&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;status=on&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">''</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>?<span class="token variable">$query_param</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>POST /margin/auto_repay</code></p> <p><em>Update user's auto repayment setting</em></p> <h3 id="setautorepay-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>status</td> <td>query</td> <td>string</td> <td>true</td> <td>New auto repayment status. <code>on</code> - enabled, <code>off</code> - disabled</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;on&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="setautorepay-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Current auto repayment setting</td> <td>Inline</td></tr></tbody></table> <h3 id="setautorepay-responseschema">Response Schema</h3> <p>Status Code <strong>200</strong></p> <p><em>AutoRepaySetting</em></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>» status</td> <td>string</td> <td>Auto repayment status. <code>on</code> - enabled, <code>off</code> - disabled</td></tr></tbody></table> <h4 id="enumerated-values-8"><a href="#enumerated-values-8" class="header-anchor">#</a> Enumerated Values</h4> <table><thead><tr><th>Property</th> <th>Value</th></tr></thead> <tbody><tr><td>status</td> <td>on</td></tr> <tr><td>status</td> <td>off</td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="retrieve-user-auto-repayment-setting"><a href="#retrieve-user-auto-repayment-setting" class="header-anchor">#</a> Retrieve user auto repayment setting</h2> <p><a id="opIdgetAutoRepayStatus"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/auto_repay'</span>
query_param <span class="token operator">=</span> <span class="token string">''</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;GET&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/auto_repay&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">''</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>GET /margin/auto_repay</code></p> <p><em>Retrieve user auto repayment setting</em></p> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;on&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="getautorepaystatus-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Current auto repayment setting</td> <td>Inline</td></tr></tbody></table> <h3 id="getautorepaystatus-responseschema">Response Schema</h3> <p>Status Code <strong>200</strong></p> <p><em>AutoRepaySetting</em></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>» status</td> <td>string</td> <td>Auto repayment status. <code>on</code> - enabled, <code>off</code> - disabled</td></tr></tbody></table> <h4 id="enumerated-values-9"><a href="#enumerated-values-9" class="header-anchor">#</a> Enumerated Values</h4> <table><thead><tr><th>Property</th> <th>Value</th></tr></thead> <tbody><tr><td>status</td> <td>on</td></tr> <tr><td>status</td> <td>off</td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="max-transferable-amount-for-specified-margin-currency"><a href="#max-transferable-amount-for-specified-margin-currency" class="header-anchor">#</a> Max transferable amount for specified margin currency</h2> <p><a id="opIdgetMarginTransferable"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/transferable'</span>
query_param <span class="token operator">=</span> <span class="token string">'currency=BTC'</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url <span class="token operator">+</span> <span class="token string">&quot;?&quot;</span> <span class="token operator">+</span> query_param<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;GET&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/transferable&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;currency=BTC&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">''</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>?<span class="token variable">$query_param</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>GET /margin/transferable</code></p> <p><em>Max transferable amount for specified margin currency</em></p> <h3 id="getmargintransferable-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>currency</td> <td>query</td> <td>string</td> <td>true</td> <td>Retrieved specified currency related data</td></tr> <tr><td>currency_pair</td> <td>query</td> <td>string</td> <td>false</td> <td>Currency pair</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency_pair&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH_USDT&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="getmargintransferable-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Successfully retrieved</td> <td>Inline</td></tr></tbody></table> <h3 id="getmargintransferable-responseschema">Response Schema</h3> <p>Status Code <strong>200</strong></p> <p><em>MarginTransferable</em></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>» currency</td> <td>string</td> <td>Currency detail</td></tr> <tr><td>» currency_pair</td> <td>string</td> <td>Currency pair</td></tr> <tr><td>» amount</td> <td>string</td> <td>Max transferable amount</td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="逐仓杠杆用户最多可借入"><a href="#逐仓杠杆用户最多可借入" class="header-anchor">#</a> 逐仓杠杆用户最多可借入</h2> <p><a id="opIdgetMarginBorrowable"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/borrowable'</span>
query_param <span class="token operator">=</span> <span class="token string">'currency=BTC'</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url <span class="token operator">+</span> <span class="token string">&quot;?&quot;</span> <span class="token operator">+</span> query_param<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;GET&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/borrowable&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;currency=BTC&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">''</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>?<span class="token variable">$query_param</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>GET /margin/borrowable</code></p> <p><em>逐仓杠杆用户最多可借入</em></p> <h3 id="getmarginborrowable-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>currency</td> <td>query</td> <td>string</td> <td>true</td> <td>Retrieved specified currency related data</td></tr> <tr><td>currency_pair</td> <td>query</td> <td>string</td> <td>false</td> <td>Currency pair</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency_pair&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH_USDT&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="getmarginborrowable-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Successfully retrieved</td> <td>Inline</td></tr></tbody></table> <h3 id="getmarginborrowable-responseschema">Response Schema</h3> <p>Status Code <strong>200</strong></p> <p><em>MarginBorrowable</em></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>» currency</td> <td>string</td> <td>Currency detail</td></tr> <tr><td>» currency_pair</td> <td>string</td> <td>Currency pair</td></tr> <tr><td>» amount</td> <td>string</td> <td>最多可借入的额度</td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="currencies-supported-by-cross-margin"><a href="#currencies-supported-by-cross-margin" class="header-anchor">#</a> Currencies supported by cross margin.</h2> <p><a id="opIdlistCrossMarginCurrencies"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/cross/currencies'</span>
query_param <span class="token operator">=</span> <span class="token string">''</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>
<span class="token function">curl</span> -X GET https://api.gateio.ws/api/v4/margin/cross/currencies <span class="token punctuation">\</span>
  -H <span class="token string">'Accept: application/json'</span>

</code></pre></div><p><code>GET /margin/cross/currencies</code></p> <p><em>Currencies supported by cross margin.</em></p> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0002&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;prec&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.000001&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;discount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;min_borrow_amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.01&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;user_max_borrow_amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1000000&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;total_max_borrow_amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000000&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;price&quot;</span><span class="token operator">:</span> <span class="token string">&quot;63015.5214&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="listcrossmargincurrencies-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>List retrieved</td> <td>[Inline]</td></tr></tbody></table> <h3 id="listcrossmargincurrencies-responseschema">Response Schema</h3> <p>Status Code <strong>200</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><em>None</em></td> <td>array</td> <td>none</td></tr> <tr><td>» name</td> <td>string</td> <td>Currency name</td></tr> <tr><td>» rate</td> <td>string</td> <td>Loan rate</td></tr> <tr><td>» prec</td> <td>string</td> <td>Currency precision</td></tr> <tr><td>» discount</td> <td>string</td> <td>Currency value discount, which is used in total value calculation</td></tr> <tr><td>» min_borrow_amount</td> <td>string</td> <td>Minimum currency borrow amount. Unit is currency itself</td></tr> <tr><td>» user_max_borrow_amount</td> <td>string</td> <td>Maximum borrow value allowed per user, in USDT</td></tr> <tr><td>» total_max_borrow_amount</td> <td>string</td> <td>Maximum borrow value allowed for this currency, in USDT</td></tr> <tr><td>» price</td> <td>string</td> <td>Price change between this currency and USDT</td></tr></tbody></table> <aside class="success">
This operation does not require authentication
</aside> <h2 id="retrieve-detail-of-one-single-currency-supported-by-cross-margin"><a href="#retrieve-detail-of-one-single-currency-supported-by-cross-margin" class="header-anchor">#</a> Retrieve detail of one single currency supported by cross margin</h2> <p><a id="opIdgetCrossMarginCurrency"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/cross/currencies/BTC'</span>
query_param <span class="token operator">=</span> <span class="token string">''</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>
<span class="token function">curl</span> -X GET https://api.gateio.ws/api/v4/margin/cross/currencies/BTC <span class="token punctuation">\</span>
  -H <span class="token string">'Accept: application/json'</span>

</code></pre></div><p><code>GET /margin/cross/currencies/{currency}</code></p> <p><em>Retrieve detail of one single currency supported by cross margin</em></p> <h3 id="getcrossmargincurrency-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>currency</td> <td>path</td> <td>string</td> <td>true</td> <td>Currency name</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0002&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;prec&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.000001&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;discount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;min_borrow_amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.01&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;user_max_borrow_amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1000000&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;total_max_borrow_amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000000&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;price&quot;</span><span class="token operator">:</span> <span class="token string">&quot;63015.5214&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="getcrossmargincurrency-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Successfully retrieved</td> <td>Inline</td></tr></tbody></table> <h3 id="getcrossmargincurrency-responseschema">Response Schema</h3> <p>Status Code <strong>200</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>» name</td> <td>string</td> <td>Currency name</td></tr> <tr><td>» rate</td> <td>string</td> <td>Loan rate</td></tr> <tr><td>» prec</td> <td>string</td> <td>Currency precision</td></tr> <tr><td>» discount</td> <td>string</td> <td>Currency value discount, which is used in total value calculation</td></tr> <tr><td>» min_borrow_amount</td> <td>string</td> <td>Minimum currency borrow amount. Unit is currency itself</td></tr> <tr><td>» user_max_borrow_amount</td> <td>string</td> <td>Maximum borrow value allowed per user, in USDT</td></tr> <tr><td>» total_max_borrow_amount</td> <td>string</td> <td>Maximum borrow value allowed for this currency, in USDT</td></tr> <tr><td>» price</td> <td>string</td> <td>Price change between this currency and USDT</td></tr></tbody></table> <aside class="success">
This operation does not require authentication
</aside> <h2 id="retrieve-cross-margin-account"><a href="#retrieve-cross-margin-account" class="header-anchor">#</a> Retrieve cross margin account</h2> <p><a id="opIdgetCrossMarginAccount"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/cross/accounts'</span>
query_param <span class="token operator">=</span> <span class="token string">''</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;GET&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/cross/accounts&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">''</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>GET /margin/cross/accounts</code></p> <p><em>Retrieve cross margin account</em></p> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;user_id&quot;</span><span class="token operator">:</span> <span class="token number">10001</span><span class="token punctuation">,</span>
  <span class="token property">&quot;locked&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;balances&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;ETH&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;available&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;freeze&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;borrowed&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.075393666654&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0000106807603333&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;POINT&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;available&quot;</span><span class="token operator">:</span> <span class="token string">&quot;9999999999.017023138734&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;freeze&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;borrowed&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;USDT&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;available&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.00000062023&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;freeze&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;borrowed&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token string">&quot;230.94621713&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;borrowed&quot;</span><span class="token operator">:</span> <span class="token string">&quot;161.66395521&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.02290237&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;risk&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.4284&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="getcrossmarginaccount-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Successfully retrieved</td> <td>Inline</td></tr></tbody></table> <h3 id="getcrossmarginaccount-responseschema">Response Schema</h3> <p>Status Code <strong>200</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>» user_id</td> <td>integer(int64)</td> <td>User ID</td></tr> <tr><td>» locked</td> <td>boolean</td> <td>Whether account is locked</td></tr> <tr><td>» balances</td> <td>object</td> <td>none</td></tr> <tr><td>»» CrossMarginBalance</td> <td>object</td> <td>none</td></tr> <tr><td>»»» available</td> <td>string</td> <td>Available amount</td></tr> <tr><td>»»» freeze</td> <td>string</td> <td>Locked amount</td></tr> <tr><td>»»» borrowed</td> <td>string</td> <td>Borrowed amount</td></tr> <tr><td>»»» interest</td> <td>string</td> <td>Interests unpaid</td></tr> <tr><td>»» total</td> <td>string</td> <td>Total account value in USDT, i.e., the sum of all currencies' <code>(available+freeze)*price*discount</code></td></tr> <tr><td>»» borrowed</td> <td>string</td> <td>Total borrowed value in USDT, i.e., the sum of all currencies' <code>borrowed*price*discount</code></td></tr> <tr><td>»» interest</td> <td>string</td> <td>Total unpaid interests in USDT, i.e., the sum of all currencies' <code>interest*price*discount</code></td></tr> <tr><td>»» risk</td> <td>string</td> <td>Risk rate. When it belows 110%, liquidation will be triggered. Calculation formula: <code>total / (borrowed+interest)</code></td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="retrieve-cross-margin-account-change-history"><a href="#retrieve-cross-margin-account-change-history" class="header-anchor">#</a> Retrieve cross margin account change history</h2> <p><a id="opIdlistCrossMarginAccountBook"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/cross/account_book'</span>
query_param <span class="token operator">=</span> <span class="token string">''</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;GET&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/cross/account_book&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">''</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>GET /margin/cross/account_book</code></p> <p><em>Retrieve cross margin account change history</em></p> <p>Record time range cannot exceed 30 days</p> <h3 id="listcrossmarginaccountbook-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>currency</td> <td>query</td> <td>string</td> <td>false</td> <td>Filter by currency</td></tr> <tr><td>from</td> <td>query</td> <td>integer(int64)</td> <td>false</td> <td>Time range beginning, default to 7 days before current time</td></tr> <tr><td>to</td> <td>query</td> <td>integer(int64)</td> <td>false</td> <td>Time range ending, default to current time</td></tr> <tr><td>page</td> <td>query</td> <td>integer</td> <td>false</td> <td>Page number</td></tr> <tr><td>limit</td> <td>query</td> <td>integer</td> <td>false</td> <td>Maximum number of records returned in one list</td></tr> <tr><td>type</td> <td>query</td> <td>string</td> <td>false</td> <td>Filter by account change type. All types are returned if not specified.</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;time&quot;</span><span class="token operator">:</span> <span class="token number">1547633726123</span><span class="token punctuation">,</span>
    <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;change&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.03&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.59316525194&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;in&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="listcrossmarginaccountbook-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>List retrieved</td> <td>[Inline]</td></tr></tbody></table> <h3 id="listcrossmarginaccountbook-responseschema">Response Schema</h3> <p>Status Code <strong>200</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>» id</td> <td>string</td> <td>Balance change record ID</td></tr> <tr><td>» time</td> <td>integer(int64)</td> <td>Account changed timestamp in milliseconds</td></tr> <tr><td>» currency</td> <td>string</td> <td>Currency changed</td></tr> <tr><td>» change</td> <td>string</td> <td>Amount changed. Positive value means transferring in, while negative out</td></tr> <tr><td>» balance</td> <td>string</td> <td>Balance after change</td></tr> <tr><td>» type</td> <td>string</td> <td>Account change type, including:<br><br>- in: transferals into cross margin account<br>- out: transferals out from cross margin account<br>- repay: loan repayment<br>- borrow: borrowed loan<br>- new_order: new order locked<br>- order_fill: order fills<br>- referral_fee: fee refund from referrals<br>- order_fee: order fee generated from fills<br>- unknown: unknown type</td></tr></tbody></table> <h4 id="enumerated-values-10"><a href="#enumerated-values-10" class="header-anchor">#</a> Enumerated Values</h4> <table><thead><tr><th>Property</th> <th>Value</th></tr></thead> <tbody><tr><td>type</td> <td>in</td></tr> <tr><td>type</td> <td>out</td></tr> <tr><td>type</td> <td>repay</td></tr> <tr><td>type</td> <td>borrow</td></tr> <tr><td>type</td> <td>new_order</td></tr> <tr><td>type</td> <td>order_fill</td></tr> <tr><td>type</td> <td>referral_fee</td></tr> <tr><td>type</td> <td>order_fee</td></tr> <tr><td>type</td> <td>unknown</td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="create-a-cross-margin-borrow-loan"><a href="#create-a-cross-margin-borrow-loan" class="header-anchor">#</a> Create a cross margin borrow loan</h2> <p><a id="opIdcreateCrossMarginLoan"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/cross/loans'</span>
query_param <span class="token operator">=</span> <span class="token string">''</span>
body<span class="token operator">=</span><span class="token string">'{&quot;currency&quot;:&quot;EOS&quot;,&quot;amount&quot;:&quot;110.553635&quot;,&quot;text&quot;:&quot;web&quot;}'</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">,</span> body<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> data<span class="token operator">=</span>body<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;POST&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/cross/loans&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">'{&quot;currency&quot;:&quot;EOS&quot;,&quot;amount&quot;:&quot;110.553635&quot;,&quot;text&quot;:&quot;web&quot;}'</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> -d <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> -H <span class="token string">&quot;Content-Type: application/json&quot;</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>POST /margin/cross/loans</code></p> <p><em>Create a cross margin borrow loan</em></p> <p>Borrow amount cannot be less than currency minimum borrow amount</p> <blockquote><p>Body parameter</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;EOS&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;110.553635&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;web&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="createcrossmarginloan-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>body</td> <td>body</td> <td>object</td> <td>true</td> <td>none</td></tr> <tr><td>» currency</td> <td>body</td> <td>string</td> <td>true</td> <td>Currency name</td></tr> <tr><td>» amount</td> <td>body</td> <td>string</td> <td>true</td> <td>Borrowed amount</td></tr> <tr><td>» text</td> <td>body</td> <td>string</td> <td>false</td> <td>User defined custom ID</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;17&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span> <span class="token number">1620381696159</span><span class="token punctuation">,</span>
  <span class="token property">&quot;update_time&quot;</span><span class="token operator">:</span> <span class="token number">1620381696159</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;EOS&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;110.553635&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;web&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">&quot;repaid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;110.506649705159&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;repaid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.046985294841&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;unpaid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0000074393366667&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="createcrossmarginloan-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Successfully borrowed</td> <td>Inline</td></tr></tbody></table> <h3 id="createcrossmarginloan-responseschema">Response Schema</h3> <p>Status Code <strong>200</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>» id</td> <td>string</td> <td>Borrow loan ID</td></tr> <tr><td>» create_time</td> <td>integer(int64)</td> <td>Creation timestamp, in milliseconds</td></tr> <tr><td>» update_time</td> <td>integer(int64)</td> <td>Update timestamp, in milliseconds</td></tr> <tr><td>» currency</td> <td>string</td> <td>Currency name</td></tr> <tr><td>» amount</td> <td>string</td> <td>Borrowed amount</td></tr> <tr><td>» text</td> <td>string</td> <td>User defined custom ID</td></tr> <tr><td>» status</td> <td>integer</td> <td>Borrow loan status, which includes:<br><br>- 1: failed to borrow<br>- 2: borrowed but not repaid<br>- 3: repayment complete</td></tr> <tr><td>» repaid</td> <td>string</td> <td>Repaid amount</td></tr> <tr><td>» repaid_interest</td> <td>string</td> <td>Repaid interest</td></tr> <tr><td>» unpaid_interest</td> <td>string</td> <td>Interest not repaid</td></tr></tbody></table> <h4 id="enumerated-values-11"><a href="#enumerated-values-11" class="header-anchor">#</a> Enumerated Values</h4> <table><thead><tr><th>Property</th> <th>Value</th></tr></thead> <tbody><tr><td>status</td> <td>1</td></tr> <tr><td>status</td> <td>2</td></tr> <tr><td>status</td> <td>3</td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="list-cross-margin-borrow-history"><a href="#list-cross-margin-borrow-history" class="header-anchor">#</a> List cross margin borrow history</h2> <p><a id="opIdlistCrossMarginLoans"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/cross/loans'</span>
query_param <span class="token operator">=</span> <span class="token string">'status=0'</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url <span class="token operator">+</span> <span class="token string">&quot;?&quot;</span> <span class="token operator">+</span> query_param<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;GET&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/cross/loans&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;status=0&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">''</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>?<span class="token variable">$query_param</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>GET /margin/cross/loans</code></p> <p><em>List cross margin borrow history</em></p> <p>Sort by creation time in descending order by default. Set <code>reverse=false</code> to return ascending results.</p> <h3 id="listcrossmarginloans-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>status</td> <td>query</td> <td>integer</td> <td>true</td> <td>Filter by status. Supported values are 2 and 3.</td></tr> <tr><td>currency</td> <td>query</td> <td>string</td> <td>false</td> <td>Filter by currency</td></tr> <tr><td>limit</td> <td>query</td> <td>integer</td> <td>false</td> <td>Maximum number of records returned in one list</td></tr> <tr><td>offset</td> <td>query</td> <td>integer</td> <td>false</td> <td>List offset, starting from 0</td></tr> <tr><td>reverse</td> <td>query</td> <td>boolean</td> <td>false</td> <td>Whether to sort in descending order, which is the default. Set <code>reverse=false</code> to return ascending results</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;17&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span> <span class="token number">1620381696159</span><span class="token punctuation">,</span>
    <span class="token property">&quot;update_time&quot;</span><span class="token operator">:</span> <span class="token number">1620381696159</span><span class="token punctuation">,</span>
    <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;EOS&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;110.553635&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;web&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;repaid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;110.506649705159&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;repaid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.046985294841&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;unpaid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0000074393366667&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="listcrossmarginloans-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Successfully retrieved</td> <td>[Inline]</td></tr></tbody></table> <h3 id="listcrossmarginloans-responseschema">Response Schema</h3> <p>Status Code <strong>200</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><em>None</em></td> <td>array</td> <td>none</td></tr> <tr><td>» id</td> <td>string</td> <td>Borrow loan ID</td></tr> <tr><td>» create_time</td> <td>integer(int64)</td> <td>Creation timestamp, in milliseconds</td></tr> <tr><td>» update_time</td> <td>integer(int64)</td> <td>Update timestamp, in milliseconds</td></tr> <tr><td>» currency</td> <td>string</td> <td>Currency name</td></tr> <tr><td>» amount</td> <td>string</td> <td>Borrowed amount</td></tr> <tr><td>» text</td> <td>string</td> <td>User defined custom ID</td></tr> <tr><td>» status</td> <td>integer</td> <td>Borrow loan status, which includes:<br><br>- 1: failed to borrow<br>- 2: borrowed but not repaid<br>- 3: repayment complete</td></tr> <tr><td>» repaid</td> <td>string</td> <td>Repaid amount</td></tr> <tr><td>» repaid_interest</td> <td>string</td> <td>Repaid interest</td></tr> <tr><td>» unpaid_interest</td> <td>string</td> <td>Interest not repaid</td></tr></tbody></table> <h4 id="enumerated-values-12"><a href="#enumerated-values-12" class="header-anchor">#</a> Enumerated Values</h4> <table><thead><tr><th>Property</th> <th>Value</th></tr></thead> <tbody><tr><td>status</td> <td>1</td></tr> <tr><td>status</td> <td>2</td></tr> <tr><td>status</td> <td>3</td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="retrieve-single-borrow-loan-detail"><a href="#retrieve-single-borrow-loan-detail" class="header-anchor">#</a> Retrieve single borrow loan detail</h2> <p><a id="opIdgetCrossMarginLoan"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/cross/loans/12345'</span>
query_param <span class="token operator">=</span> <span class="token string">''</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;GET&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/cross/loans/12345&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">''</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>GET /margin/cross/loans/{loan_id}</code></p> <p><em>Retrieve single borrow loan detail</em></p> <h3 id="getcrossmarginloan-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>loan_id</td> <td>path</td> <td>string</td> <td>true</td> <td>Borrow loan ID</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;17&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span> <span class="token number">1620381696159</span><span class="token punctuation">,</span>
  <span class="token property">&quot;update_time&quot;</span><span class="token operator">:</span> <span class="token number">1620381696159</span><span class="token punctuation">,</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;EOS&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;110.553635&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;web&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">&quot;repaid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;110.506649705159&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;repaid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.046985294841&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;unpaid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0000074393366667&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="getcrossmarginloan-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Successfully retrieved</td> <td>Inline</td></tr></tbody></table> <h3 id="getcrossmarginloan-responseschema">Response Schema</h3> <p>Status Code <strong>200</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>» id</td> <td>string</td> <td>Borrow loan ID</td></tr> <tr><td>» create_time</td> <td>integer(int64)</td> <td>Creation timestamp, in milliseconds</td></tr> <tr><td>» update_time</td> <td>integer(int64)</td> <td>Update timestamp, in milliseconds</td></tr> <tr><td>» currency</td> <td>string</td> <td>Currency name</td></tr> <tr><td>» amount</td> <td>string</td> <td>Borrowed amount</td></tr> <tr><td>» text</td> <td>string</td> <td>User defined custom ID</td></tr> <tr><td>» status</td> <td>integer</td> <td>Borrow loan status, which includes:<br><br>- 1: failed to borrow<br>- 2: borrowed but not repaid<br>- 3: repayment complete</td></tr> <tr><td>» repaid</td> <td>string</td> <td>Repaid amount</td></tr> <tr><td>» repaid_interest</td> <td>string</td> <td>Repaid interest</td></tr> <tr><td>» unpaid_interest</td> <td>string</td> <td>Interest not repaid</td></tr></tbody></table> <h4 id="enumerated-values-13"><a href="#enumerated-values-13" class="header-anchor">#</a> Enumerated Values</h4> <table><thead><tr><th>Property</th> <th>Value</th></tr></thead> <tbody><tr><td>status</td> <td>1</td></tr> <tr><td>status</td> <td>2</td></tr> <tr><td>status</td> <td>3</td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="repay-cross-margin-loan"><a href="#repay-cross-margin-loan" class="header-anchor">#</a> Repay cross margin loan</h2> <p><a id="opIdrepayCrossMarginLoan"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/cross/repayments'</span>
query_param <span class="token operator">=</span> <span class="token string">''</span>
body<span class="token operator">=</span><span class="token string">'{&quot;currency&quot;:&quot;EOS&quot;,&quot;amount&quot;:&quot;110.553635&quot;}'</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">,</span> body<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> data<span class="token operator">=</span>body<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;POST&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/cross/repayments&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">'{&quot;currency&quot;:&quot;EOS&quot;,&quot;amount&quot;:&quot;110.553635&quot;}'</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> -d <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> -H <span class="token string">&quot;Content-Type: application/json&quot;</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>POST /margin/cross/repayments</code></p> <p><em>Repay cross margin loan</em></p> <blockquote><p>Body parameter</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;EOS&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;110.553635&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="repaycrossmarginloan-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>body</td> <td>body</td> <td>object</td> <td>true</td> <td>none</td></tr> <tr><td>» currency</td> <td>body</td> <td>string</td> <td>true</td> <td>Repayment currency</td></tr> <tr><td>» amount</td> <td>body</td> <td>string</td> <td>true</td> <td>Repayment amount</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;17&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span> <span class="token number">1620381696159</span><span class="token punctuation">,</span>
    <span class="token property">&quot;update_time&quot;</span><span class="token operator">:</span> <span class="token number">1620381696159</span><span class="token punctuation">,</span>
    <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;EOS&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;110.553635&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;web&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;repaid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;110.506649705159&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;repaid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.046985294841&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;unpaid_interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0000074393366667&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="repaycrossmarginloan-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Loan repaid</td> <td>[Inline]</td></tr></tbody></table> <h3 id="repaycrossmarginloan-responseschema">Response Schema</h3> <p>Status Code <strong>200</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><em>None</em></td> <td>array</td> <td>none</td></tr> <tr><td>» id</td> <td>string</td> <td>Borrow loan ID</td></tr> <tr><td>» create_time</td> <td>integer(int64)</td> <td>Creation timestamp, in milliseconds</td></tr> <tr><td>» update_time</td> <td>integer(int64)</td> <td>Update timestamp, in milliseconds</td></tr> <tr><td>» currency</td> <td>string</td> <td>Currency name</td></tr> <tr><td>» amount</td> <td>string</td> <td>Borrowed amount</td></tr> <tr><td>» text</td> <td>string</td> <td>User defined custom ID</td></tr> <tr><td>» status</td> <td>integer</td> <td>Borrow loan status, which includes:<br><br>- 1: failed to borrow<br>- 2: borrowed but not repaid<br>- 3: repayment complete</td></tr> <tr><td>» repaid</td> <td>string</td> <td>Repaid amount</td></tr> <tr><td>» repaid_interest</td> <td>string</td> <td>Repaid interest</td></tr> <tr><td>» unpaid_interest</td> <td>string</td> <td>Interest not repaid</td></tr></tbody></table> <h4 id="enumerated-values-14"><a href="#enumerated-values-14" class="header-anchor">#</a> Enumerated Values</h4> <table><thead><tr><th>Property</th> <th>Value</th></tr></thead> <tbody><tr><td>status</td> <td>1</td></tr> <tr><td>status</td> <td>2</td></tr> <tr><td>status</td> <td>3</td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="retrieve-cross-margin-repayments"><a href="#retrieve-cross-margin-repayments" class="header-anchor">#</a> Retrieve cross margin repayments</h2> <p><a id="opIdlistCrossMarginRepayments"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/cross/repayments'</span>
query_param <span class="token operator">=</span> <span class="token string">''</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;GET&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/cross/repayments&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">''</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>GET /margin/cross/repayments</code></p> <p><em>Retrieve cross margin repayments</em></p> <p>Sort by creation time in descending order by default. Set <code>reverse=false</code> to return ascending results.</p> <h3 id="listcrossmarginrepayments-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>currency</td> <td>query</td> <td>string</td> <td>false</td> <td>none</td></tr> <tr><td>loan_id</td> <td>query</td> <td>string</td> <td>false</td> <td>none</td></tr> <tr><td>limit</td> <td>query</td> <td>integer</td> <td>false</td> <td>Maximum number of records returned in one list</td></tr> <tr><td>offset</td> <td>query</td> <td>integer</td> <td>false</td> <td>List offset, starting from 0</td></tr> <tr><td>reverse</td> <td>query</td> <td>boolean</td> <td>false</td> <td>Whether to sort in descending order, which is the default. Set <code>reverse=false</code> to return ascending results</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;51&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span> <span class="token number">1620696347990</span><span class="token punctuation">,</span>
    <span class="token property">&quot;loan_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;30&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;principal&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5.385542&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;interest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.000044879516&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="listcrossmarginrepayments-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>List retrieved</td> <td>[Inline]</td></tr></tbody></table> <h3 id="listcrossmarginrepayments-responseschema">Response Schema</h3> <p>Status Code <strong>200</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>» id</td> <td>string</td> <td>Loan record ID</td></tr> <tr><td>» create_time</td> <td>integer(int64)</td> <td>Repayment time</td></tr> <tr><td>» loan_id</td> <td>string</td> <td>Borrow loan ID</td></tr> <tr><td>» currency</td> <td>string</td> <td>Currency name</td></tr> <tr><td>» principal</td> <td>string</td> <td>Repaid principal</td></tr> <tr><td>» interest</td> <td>string</td> <td>Repaid interest</td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="max-transferable-amount-for-specified-cross-margin-currency"><a href="#max-transferable-amount-for-specified-cross-margin-currency" class="header-anchor">#</a> Max transferable amount for specified cross margin currency</h2> <p><a id="opIdgetCrossMarginTransferable"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/cross/transferable'</span>
query_param <span class="token operator">=</span> <span class="token string">'currency=BTC'</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url <span class="token operator">+</span> <span class="token string">&quot;?&quot;</span> <span class="token operator">+</span> query_param<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;GET&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/cross/transferable&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;currency=BTC&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">''</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>?<span class="token variable">$query_param</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>GET /margin/cross/transferable</code></p> <p><em>Max transferable amount for specified cross margin currency</em></p> <h3 id="getcrossmargintransferable-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>currency</td> <td>query</td> <td>string</td> <td>true</td> <td>Retrieved specified currency related data</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="getcrossmargintransferable-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Successfully retrieved</td> <td>Inline</td></tr></tbody></table> <h3 id="getcrossmargintransferable-responseschema">Response Schema</h3> <p>Status Code <strong>200</strong></p> <p><em>CrossMarginTransferable</em></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>» currency</td> <td>string</td> <td>Currency detail</td></tr> <tr><td>» amount</td> <td>string</td> <td>Max transferable amount</td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside> <h2 id="全仓杠杆用户最多可借入"><a href="#全仓杠杆用户最多可借入" class="header-anchor">#</a> 全仓杠杆用户最多可借入</h2> <p><a id="opIdgetCrossMarginBorrowable"></a></p> <blockquote><p>Code samples</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># coding: utf-8</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> hmac

host <span class="token operator">=</span> <span class="token string">&quot;https://api.gateio.ws&quot;</span>
prefix <span class="token operator">=</span> <span class="token string">&quot;/api/v4&quot;</span>
headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>

url <span class="token operator">=</span> <span class="token string">'/margin/cross/borrowable'</span>
query_param <span class="token operator">=</span> <span class="token string">'currency=BTC'</span>
<span class="token comment"># for `gen_sign` implementation, refer to section `Authentication` above</span>
sign_headers <span class="token operator">=</span> gen_sign<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> prefix <span class="token operator">+</span> url<span class="token punctuation">,</span> query_param<span class="token punctuation">)</span>
headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span>sign_headers<span class="token punctuation">)</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> host <span class="token operator">+</span> prefix <span class="token operator">+</span> url <span class="token operator">+</span> <span class="token string">&quot;?&quot;</span> <span class="token operator">+</span> query_param<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_SECRET&quot;</span>
<span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&quot;https://api.gateio.ws&quot;</span>
<span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">&quot;/api/v4&quot;</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span><span class="token string">&quot;GET&quot;</span>
<span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;/margin/cross/borrowable&quot;</span>
<span class="token assign-left variable">query_param</span><span class="token operator">=</span><span class="token string">&quot;currency=BTC&quot;</span>
<span class="token assign-left variable">body_param</span><span class="token operator">=</span><span class="token string">''</span>
<span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">body_hash</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$body_param</span>&quot;</span> <span class="token operator">|</span> openssl sha512 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>
<span class="token assign-left variable">sign_string</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$method</span><span class="token entity" title="\n">\n</span><span class="token variable">$prefix</span><span class="token variable">$url</span><span class="token entity" title="\n">\n</span><span class="token variable">$query_param</span><span class="token entity" title="\n">\n</span><span class="token variable">$body_hash</span><span class="token entity" title="\n">\n</span><span class="token variable">$timestamp</span>&quot;</span>
<span class="token assign-left variable">sign</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token variable">$sign_string</span>&quot;</span> <span class="token operator">|</span> openssl sha512 -hmac <span class="token string">&quot;<span class="token variable">$secret</span>&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $NF}'</span><span class="token variable">)</span></span>

<span class="token assign-left variable">full_url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$host</span><span class="token variable">$prefix</span><span class="token variable">$url</span>?<span class="token variable">$query_param</span>&quot;</span>
<span class="token function">curl</span> -X <span class="token variable">$method</span> <span class="token variable">$full_url</span> <span class="token punctuation">\</span>
    -H <span class="token string">&quot;Timestamp: <span class="token variable">$timestamp</span>&quot;</span> -H <span class="token string">&quot;KEY: <span class="token variable">$key</span>&quot;</span> -H <span class="token string">&quot;SIGN: <span class="token variable">$sign</span>&quot;</span>

</code></pre></div><p><code>GET /margin/cross/borrowable</code></p> <p><em>全仓杠杆用户最多可借入</em></p> <h3 id="getcrossmarginborrowable-parameters">Parameters</h3> <table><thead><tr><th>Name</th> <th>In</th> <th>Type</th> <th>Required</th> <th>Description</th></tr></thead> <tbody><tr><td>currency</td> <td>query</td> <td>string</td> <td>true</td> <td>Retrieved specified currency related data</td></tr></tbody></table> <blockquote><p>Example responses</p></blockquote> <blockquote><p>200 Response</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ETH&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="getcrossmarginborrowable-responses">Responses</h3> <table><thead><tr><th>Status</th> <th>Meaning</th> <th>Description</th> <th>Schema</th></tr></thead> <tbody><tr><td>200</td> <td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1" target="_blank" rel="noopener noreferrer">OK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Successfully retrieved</td> <td>Inline</td></tr></tbody></table> <h3 id="getcrossmarginborrowable-responseschema">Response Schema</h3> <p>Status Code <strong>200</strong></p> <p><em>CrossMarginBorrowable</em></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>» currency</td> <td>string</td> <td>Currency detail</td></tr> <tr><td>» amount</td> <td>string</td> <td>最多可借入的额度</td></tr></tbody></table> <aside class="warning">
To perform this operation, you must be authenticated by API key and secret
</aside></div> <div class="content-block__examples"></div></div></div></div> <!----></div></div></div> <!----></div><div class="global-ui"></div></div>
    <script src="./assets/js/app.65f650ad.js" defer></script><script src="./assets/js/3.b76994fe.js" defer></script><script src="./assets/js/9.f6a99c62.js" defer></script>
  </body>
</html>
